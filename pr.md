# Выполнено ДЗ № 5
 - [X] Основное ДЗ
 - [X] Задание со *
 - [X] Задание со **
 - [X] Задание со ***

## В процессе сделано:
  - собрал мониторинг Docker контейнеров несколькими доступными средствами
  - настроил визуализацию через Графану
  - подключил сборщики метрик приложений
  - подключил алертинг в слак и на почту

### Задание со *
- расширил Makefile
- активировал экспериментальные (читать-скучные) метрики самого докера, повесил джобу в прометей, нарисовал (спер готовый) даш для графаны, положил в grafana/dashboards/Docker-metrics.json
- поднял Telegraf-метрики, повесил джобу в прометей, нарисовал (спер готовый) даш для графаны, положил в grafana/dashboards/Telegraf-Docker.json
- прописал email настройки в Alertmanager, повесил так же на severity: critical

### Задание со **
  - Реализовал автоматическое добавление источника данных и созданных в данном ДЗ дашбордов в графану
  - к docker-host подключил StackDriver, вытащил кучу метрик по CPU, MEM, Disk и прочему
    > curl -sSO https://dl.google.com/cloudagents/install-monitoring-agent.sh && sudo bash install-monitoring-agent.sh
    > curl -sSO https://dl.google.com/cloudagents/install-logging-agent.sh && sudo bash install-logging-agent.sh

### Задание со ***
  - подключил прокси для прометея - Trickster и повесил его на 9089 порт, Графану переключил на импорт метрик через него, в Графане добавил дашборд активности
  - подключил фунционал healthcheck в контейнер ui, что бы отслеживать состояние порта (приложения)
    ```
    healthcheck:
      test: curl -sS http://127.0.0.1:9292 || exit 1
      interval: 20s
      timeout: 3s
      retries: 1
    ```
  - подключил отдельный контейнер krg_autoheal_1, задача которого, тестировать другие контейрены на состояние unhealthy и перезапускать их

### От себя
  - связку Autoheal + AWX посмотрел и даже покрутил, но залазить в ansible совсем не захотелось, дергаю контейнеры примитивно :)

## PR checklist
  - [X] Выставил label monitoring
  - [X] Выставил label monitoring-2
